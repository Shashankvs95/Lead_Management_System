
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lead Management System</title>

      <link rel="stylesheet" th:href="@{/assets/css/nutino.css}">
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap.css}">

    <link rel="stylesheet" th:href="@{/assets/vendors/perfect-scrollbar/perfect-scrollbar.css}">
    <link rel="stylesheet" th:href="@{/assets/vendors/bootstrap-icons/bootstrap-icons.css}">
    <link rel="stylesheet" th:href="@{/assets/css/app.css}">
    <link rel="shortcut icon" th;href="@{/assets/images/favicon.svg}" type="image/x-icon"}>
    <link rel="stylesheet" th:href="@{/assets/vendors/simple-datatables/style.css}">
    <!-------------------------->
    <script type="text/javascript" th;src="@{/assets/js/moment.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/js/daterangepicker.js}"></script>
    <link rel="stylesheet" type="text/css" th;href="@{/assets/css/daterangepicker.css}" />



    <script th:src="@{/assets/js/jquery.min.js}"></script>
</head>

<body style="font-size: 80%;">
    <div id="app">
        <div id="sidebar" class="active">
            <div class="sidebar-wrapper active">
                <div class="sidebar-header">
                    <div class="d-flex justify-content-between">
                        <div class="logo">
                            <a th:href="@{/LMS/login/bmhomepage}"><img th:src="@{/images/icons/cagl.jpg}" alt="Logo" srcset=""></a>
                        </div>
                        <div class="toggler">
                            <a href="#" class="sidebar-hide d-xl-none d-block"><i class="bi bi-x bi-middle"></i></a>
                        </div>
                    </div>
                </div>


                <div class="sidebar-menu">
                    <ul class="menu">


                        <li class="sidebar-item">
                            <a th:href="@{/LMS/login/bmhomepage}" class='sidebar-link'>
                                <i class="bi bi-house"></i>
                                <span>Home</span>
                            </a>
                            
                            
                        </li>

                            <li class="sidebar-item  ">
                            <a th:href="@{/LMS/customers/add}" class='sidebar-link'>
                                <i class="bi bi-person"></i>
                                <span>Create Lead</span>
                            </a>
                        </li>

                    </ul>

                </div>

                <div class="sidebar-menu">
                    <ul class="menu">


                        <li class="sidebar-item  ">
                            <a th:href="@{/login}" class='sidebar-link'>
                                <i class="bi bi-door-closed"></i>
                                <span>Sign-Out</span>
                            </a>
                        </li>



                    </ul>

                </div>
                <button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
            </div>
        </div>
        <div id="main">
            <header class="mb-3">
                <a href="#" class="burger-btn d-block d-xl-none">
                    <i class="bi bi-justify fs-3"></i>
                </a>
            </header>

            <div class="page-heading">
                <!-- // Basic multiple Column Form section start -->
                <section id="multiple-column-form">
                    <div class="row match-height">
                        <div class="col-12">
                            <div class="card">
                                <!-- <div class="card-header">
                                    <h4 class="card-title">Branch Manager - Jayanagar</h4>
                                </div> -->

                                <div class="card-header">
                                    <h4 class="card-title"><b> Branch Name - <b th:text="${session.branchName}"></b></b></h4>
                                        <div>
                                        <div  id="gl1" name="gl" class="form-group col-md-12" >

<label><b>Name:</b></label>
                                            <label><b th:text="${session.username}"></b></label>

<span><b>&#160</b></span>

                                        <!-- </div>
                                        <div  id="gl1" name="gl" class="form-group col-md-6"> -->

<label><b>ID:</b></label>
                                            <label><b th:text="${session.userid}"></b></label>

                                        </div>
                                    </div>

                                    <h4 class="card-title">Self Referred Leads</h4>
                                    <!-- <h4 class="card-title">Branch Name - Jayanagar</h4> -->
                                    <div class="table-responsive">
                                        <table class="table table-striped mb-0 text-center" id="table2">
                                            <thead>
                                                <tr>
                                                <th>BRANCH NAME</th>
                                                    <th>KENDRA NAME</th>
                                                    <th>BM NAME</th>
                                                    <th>CUSTOMER ID</th>
                                                    <th>STATUS</th>
                                                    <th>CREATED DATE</th>
                                                    <th>LOAN TYPE</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="customer: ${customerss}">
 <td th:text="${customer.branchName}"></td>                               
                <td th:text="${customer.kendraName}"></td>
                 <td th:text="${customer.created_By_name}"></td>
                <td th:text="${customer.customerID}"></td>
                <td th:text="${customer.status}"></td>
                <td th:text="${customer.createdDate}"></td>
                    <td th:text="${customer.typeOfLoan}"></td>
            </tr>
        </tbody>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>


                            <div class="card-header">
                                    <h4 class="card-title">KM Referred Leads</h4>
                                <!-- <div class="card-header d-flex p-2 col-lg-12"> -->

                                    <!-- <div class="row">
                                        <div class="col-md-6">
                                        <form action="" id="filtersForm">
                                            <div class="input-group">
                                            <input type="text" name="daterange" placeholder="01/01/2015 - 01/31/2015" class="form-control mr-2" >
                                            <span class="input-group-btn">
                                                <input type="submit" class="btn btn-primary w-auto" value="Filter">
                                            </span>
                                            </div>
                                        </form>
                                        </div>
                                    </div> -->
                                <div class="row">
                                    <div class="form-group col-md-3 col-12">
                                        <label for="basicInput">From</label>
                                        <input type="date" name="from_Date" class="form-control" placeholder="From_Date" id="From_Date" required="">
                                    </div>
                                    <div class="form-group col-md-3 col-12">
                                        <label for="basicInput">To</label>
                                        <input type="date" name="to_Date" class="form-control" placeholder="To_Date" id="To_Date" required="">

                                    </div>
                                    <div class="form-group col-md-3 col-12">
                                        <label for="basicInput">Status</label>
                                        <select class="choices form-select" id="mylist2" onchange="myFunction2()">
                                                                <option>WIP</option>
                                                                <option>DISBURSED</option>
                                                                <option>PENDING</option>
                                                                <option>REJECTED</option>
                                                                 <option>SANCTION</option>

                                        </select>

                                    </div>
                                   <div class="form-group col-md-3 mt-3">
                                        <input type="submit" id="btn_submit" class="btn btn-primary" onclick="searchDate2()" value="Filter">
                                    </div>
                                    <!-- <div class="form-group col-md-4 mt-3" style="margin-left: 5px;">-->

                                </div>
                            </div>


                                <!-- <div class="form-group">
                                    <label for="startDate">startDate</label>
                                    <input type="text" class="form-control" id="startDate" value="07/01/2015">
                                </div>

                                <div class="form-group">
                                    <label for="endDate">endDate</label>
                                    <input type="text" class="form-control" id="endDate" value="07/15/2015">
                                </div> -->


                                    <!-- <h5 class="card-title">Branch Name - Jayanagar</h5> -->
                                    <div class="card-body">
                                        <table class="table table-striped thead-dark text-center" id="table1">
                                            <thead>
                                                <tr>
                                                  <th>BRANCH NAME</th>
                                                    <th>KENDRA NAME</th>
                                                    <th>KM NAME</th>
                                                    <th>CUSTOMER ID</th>
                                                    <th>STATUS</th>
                                                    <th>CREATED DATE</th>
                                                    <th>LOAN TYPE</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="customer: ${customers}">
                   <td th:text="${customer.branchName}"></td>                               
                <td th:text="${customer.kendraName}"></td>
                 <td th:text="${customer.created_By_name}"></td>
                <td th:text="${customer.customerID}"></td>
                <td th:text="${customer.status}"></td>
                <td th:text="${customer.createdDate}"></td>
                    <td th:text="${customer.typeOfLoan}"></td>
 </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </section>
                <!-- // Basic multiple Column Form section end -->
            </div>

            <footer>
                <div class="footer clearfix mb-0 text-muted">
                    <div class="float-start">
                        <p>2021 &copy; CAGL</p>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>


</body>
<script type="text/javascript">
// $(document).ready(function() {

// $('#config-text').keyup(function() {
//   eval($(this).val());
// });

// $('.configurator input, .configurator select').change(function() {
//   updateConfig();
// });

// $('.demo i').click(function() {
//   $(this).parent().find('input').click();
// });

// $('#startDate').daterangepicker({
//   singleDatePicker: true,
//   startDate: moment().subtract(6, 'days')
// });

// $('#endDate').daterangepicker({
//   singleDatePicker: true,
//   startDate: moment()
// });

function slideToggle(t,e,o){0===t.clientHeight?j(t,e,o,!0):j(t,e,o)}function slideUp(t,e,o){j(t,e,o)}function slideDown(t,e,o){j(t,e,o,!0)}function j(t,e,o,i){void 0===e&&(e=400),void 0===i&&(i=!1),t.style.overflow="hidden",i&&(t.style.display="block");var p,l=window.getComputedStyle(t),n=parseFloat(l.getPropertyValue("height")),a=parseFloat(l.getPropertyValue("padding-top")),s=parseFloat(l.getPropertyValue("padding-bottom")),r=parseFloat(l.getPropertyValue("margin-top")),d=parseFloat(l.getPropertyValue("margin-bottom")),g=n/e,y=a/e,m=s/e,u=r/e,h=d/e;window.requestAnimationFrame(function l(x){void 0===p&&(p=x);var f=x-p;i?(t.style.height=g*f+"px",t.style.paddingTop=y*f+"px",t.style.paddingBottom=m*f+"px",t.style.marginTop=u*f+"px",t.style.marginBottom=h*f+"px"):(t.style.height=n-g*f+"px",t.style.paddingTop=a-y*f+"px",t.style.paddingBottom=s-m*f+"px",t.style.marginTop=r-u*f+"px",t.style.marginBottom=d-h*f+"px"),f>=e?(t.style.height="",t.style.paddingTop="",t.style.paddingBottom="",t.style.marginTop="",t.style.marginBottom="",t.style.overflow="",i||(t.style.display="none"),"function"==typeof o&&o()):window.requestAnimationFrame(l)})}

let sidebarItems = document.querySelectorAll('.sidebar-item.has-sub');
for(var i = 0; i < sidebarItems.length; i++) {
    let sidebarItem = sidebarItems[i];
 sidebarItems[i].querySelector('.sidebar-link').addEventListener('click', function(e) {
        e.preventDefault();

        let submenu = sidebarItem.querySelector('.submenu');
        if( submenu.classList.contains('active') ) submenu.style.display = "block"

        if( submenu.style.display == "none" ) submenu.classList.add('active')
        else submenu.classList.remove('active')
        slideToggle(submenu, 300)
    })
}

window.addEventListener('DOMContentLoaded', (event) => {
    var w = window.innerWidth;
    if(w < 1200) {
document.getElementById('sidebar').classList.remove('active');
    }
});
window.addEventListener('resize', (event) => {
    var w = window.innerWidth;
    if(w < 1200) {
document.getElementById('sidebar').classList.remove('active');
    }else{
        document.getElementById('sidebar').classList.add('active');
    }
});

document.querySelector('.burger-btn').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('active');
})
document.querySelector('.sidebar-hide').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('active');

})


// Perfect Scrollbar Init
if(typeof PerfectScrollbar == 'function') {
    const container = document.querySelector(".sidebar-wrapper");
    const ps = new PerfectScrollbar(container, {
        wheelPropagation: false
    });
}

// Scroll into active sidebar
document.querySelector('.sidebar-item.active').scrollIntoView(false);

$('input[name="daterange"]').daterangepicker(
{
    locale: {
      format: 'YYYY-MM-DD'
    },
    startDate: '2013-01-01',
    endDate: '2013-12-31'
},
function(start, end, label) {
    alert("A new date range was chosen: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
});

$(function() {
    $('input[name="daterange"]').daterangepicker();
});

function myFunction2() {
      var input, filter, table, tr, td, i;
      input = document.getElementById("mylist2");
      filter = input.value.toUpperCase();
      table = document.getElementById("table1");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[3];
        if (td) {
          if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }

function searchDate2() {
    var input_startDate, input_stopDate, tr, i;
  // get the values and convert to date
  input_startDate =  new Date(document.getElementById("From_Date").value);
  input_stopDate =  new Date(document.getElementById("To_Date").value);

  tr = document.querySelectorAll("#table1 tbody tr");

  for (let i = 0; i < tr.length; i++) {
    // ensure we have a relevant td
    let td = tr[i].getElementsByTagName("td");
    if (!td || !td[4]) continue;

    // you need to get the text and convert to date
    let td_date = new Date(td[4].textContent);


    // now you can compare dates correctly
    if (td_date) {
      if (td_date >= input_startDate && td_date <= input_stopDate) {
        // show the row by setting the display property
        tr[i].style.display = 'table-row;';
      } else {
        // hide the row by setting the display property
        tr[i].style.display = 'none';
      }
    }
  }
}


</script>
	
<script th:src="@{/assets/vendors/simple-datatables/simple-datatables.js}"></script>
    <script>
        // Simple Datatable
        let table1 = document.querySelector('#table1');
        let dataTable = new simpleDatatables.DataTable(table1);

        let table2 = document.querySelector('#table2');
        let dataTable2 = new simpleDatatables.DataTable(table2);
    </script>

</html>

